# 前端自动化测试实践

> 测试不是编码结束之后一个锦上添花的环节，相反测试是工程化的研发体系中不可或缺的一环。

<img src="./img/auto_test.jpg" />

## 前端需要写测试代码吗？

个人认为是需要的。



#### 为什么以前没有要求写测试代码？

结合我们团队的情况来看，主要有几个原因：

1. 成本很高，后期维护的成本也高；
2. 项目孵化阶段，以快为主（项目经理：别和我扯这些，你们可别瞎搞导致延期）；
3. 就写一个简单的页面，用不着写测试代码；
4. 团队人员稚嫩（没有这方面的意识），写代码都够呛，就别白日做梦了；
5. 前期测试人力充裕，能够通过手动执行大量测试用例来覆盖场景；
6. ...



#### 前端编写测试代码，到底需要测什么？

主要测试组件的功能和组件集成功能、以及核心场景流程，也就是我们常说的单元测试、集成测试、端到端测试。由于前端的代码无论如何拆分都是会和 DOM 发生关联，所以我们还需要加多一个**组件测试**。顺便一提，我们放弃了可视化层面（样色对不对，位置准不准）的测试，就是只测功能，举个例子：确认按钮，只需要测它能不能点击、触发对应的事件即可。



#### 测试用例从何而来？

测试用例不是开发个人 YY 出来的，所有的用例都是通过精心评审的。主要来源：

1. 首先，开发同事会在设计文档中的【场景分析】环节考虑所有场景；然后在文档评审的环节，我们会对用例的合理性进行评估，确认没有遗落；
2. 然后，开发和测试同事双方确认，这些用例能够覆盖全部场景；这一步测试同事会补充一部分用例；
3. 如果说最后还是有问题遗留到了转集成环节，那么修复 BUG 的时候，要将其转化成对应的测试用例；

以上基本能覆盖所有的核心场景。



#### 测试代码能带来什么？

客观上：

1. 手动测试的成本减少；
2. 机器执行比人执行更靠谱；
3. 测试的速度更快、覆盖范围更广：改一行代码可以有全量测试用例覆盖；
4. 用例可重复执行；
5. 功在当代，利在千秋；



主观上：

1. 给开发人员带来重构的底气：这点十分重要，关乎到整个项目代码的质量。好的代码是需要不断打磨的，想要提高项目代码的生命力，就需要不断进行重构；有了底气就能帮助开发养成优化代码的好习惯。
2. 项目架构演进提供保障：能覆盖全量测试用例，团队在架构演进上不需要再束手束脚。可以拍胸脯和项目经理说，这次的升级绝对没有问题。
3. 提升前端开发的能力：测试用例从设计文档而来，测试代码覆盖功能。这些都是要在不断的版本中去锻炼，只有锻炼才会有提升。



#### 所有前端有团队都要落实写测试吗？



#### 怎么说服项目经理？



